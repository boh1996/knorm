(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{166:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("p",[t._v("To load plugins into the ORM, use\n"),n("router-link",{attrs:{to:"/api.html#knorm-use-plugin-⇒-knorm"}},[t._v("knorm.use")]),t._v(":")],1),t._v(" "),t._m(2),n("blockquote",[n("p",[t._v("see "),n("a",{attrs:{href:"https://github.com/knorm/relations",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/relations"),n("OutboundLink")],1),t._v(" for this plugin's documentation")])]),t._v(" "),t._m(3),t._v(" "),n("table",[t._m(4),t._v(" "),n("tbody",[n("tr",[n("td",[n("a",{attrs:{href:"https://github.com/knorm/postgres",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/postgres"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("enables connecting to postgres")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://github.com/knorm/to-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/to-json"),n("OutboundLink")],1)]),t._v(" "),t._m(5)]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://github.com/knorm/relations",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/relations"),n("OutboundLink")],1)]),t._v(" "),n("td",[t._v("enables SQL joins")])]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://github.com/knorm/soft-delete",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/soft-delete"),n("OutboundLink")],1)]),t._v(" "),t._m(6)]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://github.com/knorm/paginate",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/paginate"),n("OutboundLink")],1)]),t._v(" "),t._m(7)]),t._v(" "),n("tr",[n("td",[n("a",{attrs:{href:"https://github.com/knorm/timestamps",target:"_blank",rel:"noopener noreferrer"}},[t._v("@knorm/timestamps"),n("OutboundLink")],1)]),t._v(" "),t._m(8)])])]),t._v(" "),t._m(9),t._v(" "),n("p",[t._v("A Knorm plugin can be any "),n("em",[t._v("named")]),t._v(" function or an object with an "),n("code",[t._v("init")]),t._v(" function\nand a "),n("code",[t._v("name")]),t._v(" property. See "),n("router-link",{attrs:{to:"/api.html#knorm-use-plugin-⇒-knorm"}},[t._v("knorm.use")]),t._v(" for\nmore info.")],1),t._v(" "),n("p",[t._v("When a plugin is loaded via "),n("router-link",{attrs:{to:"/api.html#knorm-use-plugin-⇒-knorm"}},[t._v("knorm.use")]),t._v(", the\nfunction (or object's "),n("code",[t._v("init")]),t._v(" function) is called with the "),n("code",[t._v("knorm")]),t._v(" instance. The\nplugin can then modify the classes on the instance:")],1),t._v(" "),t._m(10),n("div",{staticClass:"warning custom-block"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("p",[t._v("If you update knorm's "),n("code",[t._v("Query")]),t._v(" class then also update\n"),n("router-link",{attrs:{to:"/api.html#knorm-query-query"}},[t._v("Model.Query")]),t._v(" so that models use the updated\n"),n("code",[t._v("Query")]),t._v(" class. Similarly, when you update the "),n("code",[t._v("Field")]),t._v(" class, also update\n"),n("router-link",{attrs:{to:"/api.html#knorm-field-field"}},[t._v("Model.Field")]),t._v(".")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Plugins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Plugins modify the behaviour of "),s("code",[this._v("Field")]),this._v(", "),s("code",[this._v("Model")]),this._v(" and "),s("code",[this._v("Query")]),this._v(" classes simply by\noverloading their methods.")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" knorm "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'@knorm/knorm'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" knormRelations "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'@knorm/relations'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Query "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("knorm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token comment"}},[t._v("/* knorm options */")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token function"}},[t._v("knormRelations")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token comment"}},[t._v("/* plugin options */")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"available-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#available-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Available plugins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th",[this._v("Plugin")]),this._v(" "),s("th",[this._v("Description")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("td",[this._v("adds a "),s("code",[this._v("toJSON")]),this._v(" method to Model")])},function(){var t=this.$createElement,s=this._self._c||t;return s("td",[this._v("enables soft-deletion: adds support for "),s("code",[this._v("deleted")]),this._v(" and "),s("code",[this._v("deletedAt")]),this._v(" fields")])},function(){var t=this.$createElement,s=this._self._c||t;return s("td",[this._v("adds a "),s("code",[this._v("count")]),this._v(" method to Model and Query and adds query pagination options")])},function(){var t=this.$createElement,s=this._self._c||t;return s("td",[this._v("enables timestamps: adds support for "),s("code",[this._v("createdAt")]),this._v(" and "),s("code",[this._v("updatedAt")]),this._v(" fields")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"creating-custom-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-custom-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Creating custom plugins")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token function-variable function"}},[t._v("preventDelete")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" orm "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("YouShallNotDelete")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("orm"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Query")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("delete")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("Error")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'deleting is not allowed!'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  orm"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Model"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Query "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" orm"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Query "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" YouShallNotDelete"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Model "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("knorm")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("/* knorm options */")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("use")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("preventDelete"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nModel"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("delete")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token keyword"}},[t._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// logs Error('deleting is not allowed!')")]),t._v("\n")])])])}],!1,null,null,null);e.options.__file="plugins.md";s.default=e.exports}}]);